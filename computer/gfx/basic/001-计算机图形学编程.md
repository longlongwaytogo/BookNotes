# 《计算机图形学编程》(使用OpenGL和C++)
著： 

- [美] V.斯科特.戈登	V.Scott.Gordon
- [美] 约翰.克莱维吉 John.Clevenger

译：

- 魏广程
- 沈瞳

## 出版社：
	中国工业出版社	人民邮电出版社

## 1. 本书主要讲什么

	本书主要以OpenGL和C++语言为基础，讲解和演示了图形学基础理论知识，更具实用性和操作性。

## 2. 本书具体讲了哪些内容
本书分14章和3个附录，先后讲到：
- OpenGL图形管线
- 图形编程数学基础
- 管理3D图形数据
- 纹理贴图
- 3D模型
- 光照
- 阴影
- 天空
- 背景
- 增强表面细节
- 参数曲面
- 曲面细分着色器
- 几何着色器
- 噪声纹理
- 3D纹理
- 其他
- 附录包含了window和macox平台的安装、NSight调试工具使用
## 3. 本书编制的目的：
	作为计算机科学专业本科OpenGL 3D图形看成相关课程的教材使用
## 4. 目标读者：
	计算机专业本科在读学生
## 5. 习题
	本书每章配有一定的习题，辅助学生对每章内容进一步理解和学习

## 6. 配套资源
	 原网站的资源已经不可用，后续补充本人收集的资源

## 7. 教师辅助资源
- ppt教学大纲
- 每个讲解详细资料
- 习题答案和源码

## 8. 本书用到的第三方库
- Soil2： 读取和处理纹理文件
- GLFW： 图形窗口管理库
- GLEW： OpenGL扩展库

## 9. 本书提到的其他图书：

- 《OpenGL Subperbile》
- 《OpenGL Proggramming Guide》
- 《OpenGL 4 Shading Language Cookbook》
- 《Interactive Compute Graphics》
- 《Intoduction to 3D Game programming with DirectX 12》

## 10. 作者简介：
	V.斯科特.戈登(V.Scott Gordon)博士，已在加州州立大学担任教授20多年，主要教授高级图形和游戏工程课程
	
	约翰.克莱维吉(John clevenger)博士，拥有超过40年教学经验，教学内容包括高级图形、游戏架构、操作系统、VLSL芯片设计和系统仿真等。


# 第一章 入门简介
- 简单介绍了OpenGL图形库
- 基于OpenGL开发环境以和以来环境进行介绍，主要包括：
	- c++开发环境： Windows平台--visual Studio/MocOS--XCode
	- OpenGL/GLSL(4.3):OpenGL存在多个版本，3.3之后是一个分水岭
	- 图形管理：glut/cpw/Glow/Clui/GLFW
	- 扩展库：GLee/GLLoader/Glew/GL3W/GLAD
	- 数学库： GLM/Eigen/Vmath
	- 纹理管理库：FreeImage/DevIL/GLI/Glraw/SOIL/SOIL2(simple OpenGL image loader)
	- 可选库：Assimp/tinyobjLoader
- 安装和配置
	C++和OpenGL环境开发


# 第二章 OpenGL图形管线

## 1. OpenGL是整合软硬件的多平台2D和3D图形API

### OpenGL
- 软件层提供c的接口调用
- 硬件层提供一个多级图形管线，并提供GLSL语言编程

## 2. OpenGL程序概览

![框架](./images/Fig02_01.png)

## 3. OpenGL图形管线
![](./images/Fig02_02.png)
- 顶点着色器：对顶点进行操作，主要处理顶点的位置
- 曲面细分着色器：用以生成大量三角形(TCS/TES)
- 几何着色器：以图元(三角形/点/四边形)为单位，可操作图元中的多个顶点，主要用于生成额外图元的能力
- 光栅化： 将3D世界的点、三角形展现到2D平面的显示器上，转化为以像素为单位的阵列(插值处理)
- 片段着色器：用于处理光栅化后的像素，指定像素颜色
- 像素操作：处理隐藏面消隐（HSR/z-buffer)

#  第三章 数学基础
## 1. 3D坐标系
 OpenGL使用右手系,DirectX使用左手系
![](./images/Fig03_01.png)
## 2. 齐次坐标
 - 点的表示(x,y,z,1)
 - 向量(x,y,z,0)
 ## 3. 矩阵
 - 矩阵分为行主序矩阵和列主序矩阵
 - OpenGL使用列主序矩阵，计算乘法执行从左往右
### 3.1 矩阵类型
- 单位矩阵

$$
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & 1 & 0 \\
0 & 0 & 0 & 1
\end{bmatrix}
$$

- 转置矩阵:	将矩阵的主对角线翻转，交换矩阵的行索引与列索引

$$
\begin{bmatrix}
A_{00} & A_{01} & A_{02} & A_{03} \\
A_{10} & A_{11} & A_{12} & A_{13} \\
A_{20} & A_{21} & A_{22} & A_{23} \\
A_{30} & A_{31} & A_{32} & A_{33} 
\end{bmatrix} 
= 
\begin{bmatrix}
A_{00} & A_{10} & A_{20} & A_{30} \\
A_{01} & A_{11} & A_{21} & A_{31} \\
A_{02} & A_{12} & A_{22} & A_{32} \\
A_{03} & A_{13} & A_{23} & A_{33} 
\end{bmatrix} ^T
$$
- 逆矩阵： $ A*A^{-1} = E $  或 $ AB=BA=E $

- 正交矩阵：
$$
AA^T=E
$$
即：转置等于其逆的矩阵:
$$
A^T = A^{-1}
$$

 - 矩阵运算
 - 加法
$$
\begin{bmatrix}
	A + a & B + b & C + c & D + d \\
	E + e & F + f & G + g & H + h \\
	I + i & J + j & K + k & L + l \\
	M + m & N + n & O + o & P + p 
\end{bmatrix} = 
\begin{bmatrix} 
A & B & C & D \\
E & F & G & H \\
I & J & K & L \\
M & N & O & P
\end{bmatrix} + 
\begin{bmatrix}
 a & b & c & d \\
 e & f & g & h \\
 i & j & k & l \\
 m & n & o & p 
\end{bmatrix}
$$
 - 乘法
$$
\begin{bmatrix} 
AX & BY & CZ & D \\
EX & FY & GZ & H \\
IX & JY & KZ & L \\
MX & NY & OZ & P
\end{bmatrix}  =
\begin{bmatrix} 
A & B & C & D \\
E & F & G & H \\
I & J & K & L \\
M & N & O & P
\end{bmatrix} 
\times 
\begin{pmatrix}
	X \\
	Y \\
	Z
\end{pmatrix}
$$
- 平移矩阵	
$$
\begin{pmatrix}
	X + T_x \\
	Y + T_y \\
	Z + T_z \\
	 1
\end{pmatrix}  =
\begin{bmatrix}
	1 & 0 & 0 & T_x \\
	0 & 1 & 0 & T_y \\
	0 & 0 & 1 & T_z \\
\end{bmatrix} 
\times
\begin{pmatrix}
	X \\
	Y\\
	Z
\end{pmatrix}	 
$$
   - 缩放矩阵
$$
\begin{bmatrix}
X * S_x \\
Y * S_y \\
Z * S_z
\end{bmatrix}=
\begin{bmatrix}
S_x & 0 & 0 & 0 \\
0 & S_y & 0 & 0 \\
0 & 0 & S_z & 0 \\
0 & 0 & 0 & 1
\end{bmatrix} 
\times
\begin{bmatrix} 
X \\
Y \\
Z \\
1
\end{bmatrix}
$$
   - 右手系转左手系矩阵
$$
\begin{bmatrix}
1 & 0 & 0 & 0 \\
0 & 1 & 0 & 0 \\
0 & 0 & -1 & 0 \\
0 & 0 & 0 & 1 
\end{bmatrix}
$$
- 旋转矩阵![](./images/Fig03_02.png)
	旋转矩阵的数值很是类似，个人总结了以下规律：
	- 条件： 
		- 右手坐标系，列主序矩阵
		- 旋转方向：从开始轴到目标轴
	- 被旋转的轴所对应的矩阵分量值不变
	- 起始轴向目标轴旋转，目标轴$sin(\theta)$值前加负号
	- 左侧列总为：$cos(\theta),sin(\theta)$组合
	- 右侧列总为:  $sin(\theta),cos(\theta)$组合

- 投影矩阵
	- 透视投影
		
		![](./images/Fig03_04.png)
		
	- 正交投影
  	![](./images/Fig03_05.png)
	
	投影矩阵范围中，z方向的范围为[0,1]（opengl投影矩阵z方向为[-1,1]，可以参考opengl编程指南附录部分)
  
   - LookAt矩阵
    ![](./images/fig03_03.png)
    ![](./images/fig03_06.png)
  
  # 4. 向量运算
  
- 加减
$$
A\pm B = (u \pm x, v \pm y, w \pm z )
$$
- 点积
$$
A \cdot B = (ux + vy + wz)
$$
- 叉积

$$
A \times B = 
(vz- wy, wx - uz, uy - vx)
$$
